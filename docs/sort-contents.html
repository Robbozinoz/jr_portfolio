<!DOCTYPE html>
<html lang='en'>

<head>
    <meta charset=utf-8>
    <title>Table of Contents</title>
    <meta name='description' content='JS content'>
    <meta name='author' content='Robbozinoz'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.0/css/bulma.min.css'>
    <link href='https://fonts.googleapis.com/css2?family=Raleway:wght@500&display=swap' rel='stylesheet'>
</head>
<style type="text/css">
    html {
        scroll-behavior: smooth;
    }

    body {
        margin: 1em auto;
        max-width: 88%;
        width: 88%;
        font-family: 'Raleway', sans-serif;
    }

    a.button {
        margin: 7px;
    }
</style>

<body class="content">

    <body class="content">

        <h1 class="content">Table of Contents - Missing IDs</h1>

        <div id="table-of-contents" class="content">
            <!--Inject anchor links here-->
        </div>

        <div class="box">
            <h2 class="content" id="cat-o-nine-tails">Cat O'Nine Tails</h2>

            <p>Cat o'nine tails Pieces of Eight swab carouser tackle. Pink hornswaggle gabion Sea Legs Davy Jones'
                Locker.
            </p>

            <p>Hang the jib Nelsons folly trysail ahoy prow. Transom strike colors scallywag aft league.</p>
        </div>
        <div class="box">
            <h3 id="the-brig" class="content">The Brig</h3>

            <p>Dead men tell no tales topmast Sail ho Davy Jones' Locker chantey. Wherry fluke pillage rope's end brig.
            </p>
        </div>
        <div class="box">
            <h4 class="content">Privateer</h4>

            <p>Tack topgallant draft line flogging. Maroon overhaul grog blossom Privateer main sheet.</p>

            <p>Provost me cackle fruit Corsair Cat o'nine tails. Hempen halter Davy Jones' Locker clipper bring a spring
                upon
                her cable run a shot across the bow.</p>
        </div>
        <div class="box">
            <h2 class="content">Ahoy</h2>

            <p>Booty squiffy wench overhaul ahoy. Parrel Pirate Round long clothes long boat come about.</p>

            <p>Squiffy jack crow's nest bilged on her anchor barkadeer. Snow bucko mizzen six pounders tack.</p>
        </div>
        <div class="box">
            <h3 id="man-of-war" class="content">Man-of-War</h3>

            <p>Lee lad nipperkin avast pressgang. Man-of-war prow ho Sail ho landlubber or just lubber.</p>

            <p>Ho no prey, no pay fire ship salmagundi capstan. Hail-shot doubloon wherry loaded to the gunwalls
                cutlass.
            </p>
        </div>
        <div class="box">
            <h2 id="corsair" class="content">Corsair</h2>

            <p>Corsair chantey hardtack ahoy snow. Maroon cog galleon topmast tender.</p>
        </div>
        <div class="box">
            <h3 id="shiver-me-timbers">Shiver Me Timbers</h3>

            <p>Galleon nipper Shiver me timbers lugger Nelsons folly. Wench ballast scurvy man-of-war hearties.</p>

            <p>Poop deck clap of thunder Corsair grog hornswaggle. Dead men tell no tales brigantine long clothes black
                spot
                sutler.</p>
        </div>
        <div class="box">
            <h4 id="scurvy-dog" class="content">Scurvy Dog</h4>

            <p>Jury mast Letter of Marque boatswain scurvy sheet. Jolly boat plunder jack starboard Pirate Round.</p>

            <p>Holystone bring a spring upon her cable grog blossom deadlights league. Lanyard gabion reef sails booty
                gaff.
            </p>
        </div>
        <div class="box">
            <h4 class="content">Sea Legs</h4>

            <p>Sea Legs to go on account skysail Yellow Jack heave down. Spanker heave down yawl starboard barque.</p>

            <p>To go on account hulk swing the lead heave to tack. Fore fire in the hole prow run a rig Jack Ketch.</p>
        </div>
        <div class="box">
            <h2 id="quarterdeck" class="content">On the Quarterdeck</h2>

            <p>Tack chase red ensign league pinnace. Holystone quarterdeck me boatswain rope's end.</p>

            <p>Sink me lanyard Pieces of Eight starboard black spot. Blimey heave down crimp mutiny matey.</p>
        </div>
        <div class="box">
            <h3 id="jolly-roger" class="content">Jolly Roger</h3>

            <p>Belay piracy come about jolly boat transom. Heave to gally snow Arr wherry.</p>

            <p>Sutler Davy Jones' Locker ahoy walk the plank lugger. Jolly Roger matey hornswaggle Privateer marooned.
            </p>
        </div>
        <div class="box">
            <h2 class="content">Davy Jones' Locker</h2>

            <p>Davy Jones' Locker jib trysail bowsprit heave down. Transom square-rigged clipper Jack Ketch chandler.
            </p>

            <p>Square-rigged yawl execution dock sloop American Main. Six pounders red ensign lugger heave to dead men
                tell
                no
                tales.</p>
        </div>
        <div class="box">
            <h3 id="sloop" class="content">Sloop</h3>

            <p>Spanker rutters Arr sloop pinnace. List crimp swab Blimey grog.</p>

            <p>Shiver me timbers hulk black jack Pirate Round clap of thunder. Scuppers six pounders carouser spirits
                jib.
            </p>
        </div>
    </body>
    <footer>
        <em>Text provided by <a href="https://pirateipsum.me/">Pirate Ipsum</a>.</em>
    </footer>

    <script>
        //Select the table of contents div element
        var tableContent = document.querySelector('#table-of-contents');

        //Select all items that contain headings
        var containers = Array.prototype.slice.call(document.querySelectorAll('.box'));

        /**
         * Extract the id value
         * https://stackoverflow.com/a/2450976/1293256
         * @param  {Array}  containers The elements containing the heading
         * @returns {Object}   The new heading id
         */
        var searchEmptyIds = containers.map(function (container) {
            if (container.firstElementChild.id === "") {
                //Return heading for each container as object
                var childHeading = container.firstElementChild;

                //Set new attribute of that object to current Title
                childHeading.setAttribute('id', childHeading.innerHTML.replace(/[^a-z0-9]+/gi, '-'));

                //Send new Heading elements id attribute to anchor creation function
                anchorCreate(childHeading);
            }
        })


        /**
         * Extract the id value
         * https://stackoverflow.com/a/2450976/1293256
         * @param  {Array}  containers The elements containing the heading
         * @returns {string}   The content of the table of contents
         */
        function anchorCreate() {
            //Convert the anchor array to html using innerHtml and id attributes
            tableContent.innerHTML =
                '<div class="box buttons are-medium"">' +
                containers.map(function (anchor) {
                    var html =
                        '<div class="row">' +
                        '<a class="button is-link is-light" href="#' + anchor.firstElementChild.id +
                        '" aria-label="Read more about ' + anchor.firstElementChild.innerText +
                        '">' +
                        anchor.firstElementChild.innerHTML +
                        '</a>' +
                        '</div>';
                    return html;
                }).join('') +
                '</div>';
        }
    </script>
    </script>
    window.addEventListener("load", myHeadings);
    </script>
    <script src='https://polyfill.io/v3/polyfill.min.js'></script>
</body>

</html>